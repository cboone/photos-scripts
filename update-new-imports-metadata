#!/usr/bin/env bash

function update-copyright-metadata {
  local -r directory="$1"
  local -r email='info@catamounthardware.com'
  local -r name='Christopher Boone'
  local -r terms='No reproduction rights are granted without the express written permission of Christopher Boone. No other usage is expressed or implied.'
  local -r url='https://catamounthardware.com'

  # shellcheck disable=2016
  exiftool \
    -ignoreMinorErrors \
    -overwrite_original_in_place \
    -preserve \
    -verbose \
    -if 'not defined $WebStatement or $WebStatement eq ""' \
    -Artist="$name" \
    -Copyright="$name" \
    -CreatorWorkEmail="$email" \
    -CreatorWorkURL="$url" \
    -Credit="$name" \
    -UsageTerms="$terms" \
    -WebStatement="$url" \
    "$directory"
}

function update-lens-metadata {
  local -r directory="$1"
  local -r lens_make='Venus Optics'
  local -r lens_model='Laowa 10mm f/4'
  local -r lens_info="$lens_make $lens_model"
  local -r max_aperture='4'

  # shellcheck disable=2016
  exiftool \
    -ignoreMinorErrors \
    -overwrite_original_in_place \
    -preserve \
    -verbose \
    -if 'not defined $LensMake or $LensMake eq ""' \
    -LensInfo="$lens_info" \
    -LensMake="$lens_make" \
    -LensModel="$lens_model" \
    -MaxApertureValue="$max_aperture" \
    "$directory"
}

function main {
  local -r photos=~/Pictures/Photographs
  local -r newly_imported_photos="$photos"/Importing

  set -x

  update-copyright-metadata "$newly_imported_photos"
  update-lens-metadata "$newly_imported_photos"
}

main "$1"
